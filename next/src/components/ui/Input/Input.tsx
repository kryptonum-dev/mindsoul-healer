import styles from './Input.module.scss';
import type { InputTypes } from './Input.types';
import Textarea from './_Textarea';

export default function Input({
  label,
  disabled = false,
  register,
  errors,
  textarea = false,
  filled = false,
  ...props
}: InputTypes) {
  const Element = textarea ? Textarea : 'input';

  return (
    <label
      className={styles.input}
      aria-disabled={disabled}
      aria-invalid={!!errors[register.name]}
      data-filled={Boolean(filled)}
    >
      <p className={styles.row} dangerouslySetInnerHTML={{ __html: label }}></p>
      <Element disabled={disabled} {...register} name={register.name} {...props} />
      {errors[register.name] && <ErrorIcon />}
      {errors[register.name] && <p className={styles.error}>{errors[register.name]?.message?.toString()}</p>}
    </label>
  );
}

const ErrorIcon = () => (
  <svg width={20} height={20} viewBox='0 0 20 20' fill='none' xmlns='http://www.w3.org/2000/svg'>
    <g id='Triangle'>
      <path
        id='Vector'
        fillRule='evenodd'
        clipRule='evenodd'
        d='M8.73303 1.99523C9.11513 1.77258 9.54945 1.65527 9.99169 1.65527C10.4339 1.65527 10.8682 1.77258 11.2503 1.99523C11.632 2.2176 11.9478 2.53709 12.1659 2.92119C12.1661 2.92167 12.1664 2.92216 12.1667 2.92264L18.83 14.5835C18.8303 14.584 18.8306 14.5845 18.8309 14.5849C19.0496 14.9644 19.1649 15.3948 19.165 15.8329C19.1651 16.2715 19.0498 16.7024 18.8307 17.0824C18.6116 17.4624 18.2963 17.778 17.9166 17.9976C17.537 18.2172 17.1062 18.3331 16.6675 18.3335H3.33677C2.89743 18.3368 2.46497 18.2242 2.08297 18.007C1.69979 17.7892 1.381 17.474 1.15891 17.0933C0.936826 16.7125 0.819342 16.2799 0.818366 15.8391C0.817391 15.3991 0.932597 14.9665 1.15232 14.5853C1.15267 14.5847 1.15301 14.5841 1.15335 14.5835L7.81669 2.92264C7.81697 2.92216 7.81724 2.92167 7.81752 2.92118C8.03553 2.53709 8.35142 2.2176 8.73303 1.99523ZM9.99169 3.32194C9.84428 3.32194 9.6995 3.36104 9.57214 3.43526C9.44477 3.50948 9.33937 3.61615 9.26669 3.7444L9.26523 3.74697L2.5967 15.4169C2.52323 15.5441 2.4847 15.6885 2.48503 15.8354C2.48535 15.9824 2.52452 16.1266 2.59854 16.2535C2.67257 16.3804 2.77883 16.4855 2.90656 16.5581C3.03429 16.6307 3.17895 16.6682 3.32586 16.6669L3.33336 16.6668L16.6658 16.6669C16.812 16.6667 16.9556 16.6281 17.0822 16.5549C17.2088 16.4817 17.3138 16.3765 17.3869 16.2498C17.4599 16.1232 17.4984 15.9795 17.4983 15.8333C17.4983 15.6871 17.4598 15.5435 17.3867 15.4169L17.3848 15.4136L10.7182 3.74697L10.7167 3.7444C10.644 3.61615 10.5386 3.50947 10.4112 3.43526C10.2839 3.36104 10.1391 3.32194 9.99169 3.32194Z'
        fill='#A71E1E'
      />
      <path
        id='Vector_2'
        fillRule='evenodd'
        clipRule='evenodd'
        d='M9.99935 6.6665C10.4596 6.6665 10.8327 7.0396 10.8327 7.49984V10.8332C10.8327 11.2934 10.4596 11.6665 9.99935 11.6665C9.53911 11.6665 9.16602 11.2934 9.16602 10.8332V7.49984C9.16602 7.0396 9.53911 6.6665 9.99935 6.6665Z'
        fill='#A71E1E'
      />
      <path
        id='Vector_3'
        fillRule='evenodd'
        clipRule='evenodd'
        d='M9.16602 14.1668C9.16602 13.7066 9.53911 13.3335 9.99935 13.3335H10.0077C10.4679 13.3335 10.841 13.7066 10.841 14.1668C10.841 14.6271 10.4679 15.0002 10.0077 15.0002H9.99935C9.53911 15.0002 9.16602 14.6271 9.16602 14.1668Z'
        fill='#A71E1E'
      />
    </g>
  </svg>
);
